---
title: "Project Draft"
output: html_document
date: "2023-04-22"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
source("../../scripts/viridis.R")

ncaa_full = read_csv('../../data/ncaa/ncaa_tournament_full.csv')
```

## Project Draft

### Group Members

-   Sid Ganesh
-   Mason Langer
-   Lauren Graham
-   Richard Wolff

## Introduction

Basketball is an incredibly variable sport. While all sports share a degree of randomness, basketball--specifically college basketball's "March Madness," the single-elimination Division 1 NCAA (National Collegiate Athletics Association) National Tournament--can be truly unpredictable. Displayed by its wild upsets, incredible buzzer beaters, and "Cinderella stories," March Madness provides a unique glimpse into basketball odds and probabilities. As a group, we chose the NCAA D1 Men's National Tournament as both our topic and our sample, as we wanted to see the statistical trends in common with the most successful of the tournament teams over the past decade. Specifically, we wanted to see how a team's statistical ratings before the tournament would affect their success in the tournament field. **As such, we believe that higher-seed teams (1-8) make the Final Four more frequently than lower-seeded (9-16) teams, due to their highly proficient statistical profile, which includes offensive and defensive ratings.**

## Background

The majority of our data used throughout the report was gathered from [**kenpom.com**](https://www.kenpom.com), a renowned basketball analytics website that tracks statistics for all 358 teams in NCAA Division 1 Men's Basketball. Using data summaries for every year between 2012 and 2023 (excluding 2020), we were able to compile a data set with the following variables:

-   *Season*: year of the tournament

-   *Offensive Efficiency (OE)*: points scored per game

    -   *Adjusted Off. Efficiency (AdjOE)*: points scored per 100 possessions

    -   A higher offensive efficiency means that the team has a good offensive

-   *Defensive Efficiency (DE)*: points allowed per game

    -   *Adjusted Def. Efficiency (AdjDE)*: points allowed per 100 possessions

    -   A lower defensive efficiency means that the team has a good defense

-   *Efficiency Margin (EM)*: difference of offensive efficiency and defensive efficiency ($OE - DE$)

    -   *Adjusted Eff. Margin (AdjEM)*: difference of adjusted off. efficiency and adjusted def. efficiency

-   *Seed*: seed of the team in the tournament occurring in that respective season

Each data value is that team's value **before** the national tournament. Our data analysis will prioritize *AdjOE*, *AdjDE*, and *AdjEM*, as they represent a standardized metric that can be used to effectively compare teams. However, as there are many different qualitative and quantitative factors that can affect a single basketball game, it is not possible to get the full picture of a basketball team using three statistics. Although it may not showcase the full picture, our three primary metrics can be used to provide a strong explanation for a team's prolonged success. Moving forward, we will use *AdjOE*, *AdjDE*, and *AdjEM* to distinguish between successful and unsuccessful basketball programs, and the typical profile of a championship-contending team.

## Analysis

```{r}
ggplot(ncaa_full, aes(x = AdjDE, y = AdjOE, color = seed_season), size = 3) +
  geom_point() +
  geom_hline(yintercept = mean(ncaa_full$AdjOE)) +
  geom_vline(xintercept = mean(ncaa_full$AdjDE)) +
  xlab("Adjusted Defensive Efficiency") +
  ylab("Adjusted Offensive Efficiency") +
  ggtitle("Adjusted Offensive Efficiency vs. Adjusted Defensive Efficiency", subtitle="Each NCAA Tournament Team, 2012-23")
```

-   Horizontal and vertical black lines demonstrate the mean adjusted offensive efficiency and mean adjusted defensive efficiency, respectively

-   Teams in the top left quadrant demonstrate a great offenses and defense, while the teams in the bottom right quadrant demonstrate bad offenses and defenses

    -   Roughly aligns with seeding (higher seeds in top left, lower seeds in top right)

### Average Adjusted Efficiency Margin by Seed

```{r}
ncaa_seed_sum = ncaa_full %>%
  group_by(seed_season) %>%
  summarize(avg_adj_oe = round(mean(AdjOE), 2),
            avg_adj_de = round(mean(AdjDE), 2),
            avg_adj_em = round(mean(AdjEM), 2))

ncaa_seed_sum %>%
  print(n = Inf)

ggplot(ncaa_seed_sum, aes(x = factor(seed_season), y = avg_adj_em)) +
  geom_col(fill = 'slateblue4') +
  xlab("Seed") +
  ylab("Adjusted Efficiency Margin") +
  ggtitle("Average Adjusted Efficiency Margin by Seed",
          subtitle="2012-2023 ")
```

> Higher seeds, specifically 1-4 seeds, have great efficiency margins ($>20$+), while low seeds (13-16) have significantly low efficiency margins, with the average 16 seed having a negative efficiency margin.

-   Negative efficiency margins mean that the team has, on average, been outscored by their opponents ($AdjDE > AdjOE$)

### Top Four Teams (since 2012) in Adjusted Offensive and Adjusted Defensive Efficiency

#### Offensive Efficiency

```{r}
top4_aoe = ncaa_full %>%
  mutate(AdjOE = round(AdjOE, 2)) %>%
  slice_max(order_by = AdjOE, n = 4) %>%
  select(Season, TeamName, AdjOE, seed_season)

top4_aoe %>%
  print.data.frame(digits = 5)
```

> The top four highest adjusted offensive efficiencies since 2012 include **2018 Villanova**, **2015 Wisconsin**, **2021** **Gonzaga**, and **2014 Creighton**. The sample features three one seeds, all of which made the National Championship game.

#### Defensive Efficiency

```{r}
top4_ade = ncaa_full %>%
  mutate(AdjDE = round(AdjDE, 2)) %>%
  slice_min(order_by = AdjDE, n = 4) %>%
  select(Season, TeamName, AdjOE, seed_season)

top4_ade %>%
  print.data.frame(digits = 5)
```

> The top four highest adjusted defensive efficiencies since 2012 include **2013 Louisville**, **2015 Kentucky**, **2018** and **2015** **Virginia**. The sample features three one seeds, two of which made it the Final Four--Louisville being the 2013 National Champion.

## Discussion

-   Discussion

    -   Provide broader interpretations of your analysis and describe how to interpret your results with respect to your question of interest.

    -   Discuss any potential short-comings of the analysis.

    -   Discuss potential future directions for additional work

        -   New questions

        -   Different methods to address the same questions

        -   New data you might collect to refine your understanding

    -   Summarize your primary conclusions and the primary evidence that supports these conclusions.

### References

-   References

In the R Markdown file, you may automatically cite other resources by using a caret followed by the reference between square brackets: \^[your reference text] which will place a marker at this location and a footnote at the end of the document.
